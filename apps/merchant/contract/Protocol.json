{
  "abi": [
    {
      "type": "constructor",
      "inputs": [
        { "name": "_spInstance", "type": "address", "internalType": "address" },
        { "name": "_usdc", "type": "address", "internalType": "address" }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "USDC",
      "inputs": [],
      "outputs": [{ "name": "", "type": "address", "internalType": "contract IERC20" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "didReceiveAttestation",
      "inputs": [
        { "name": "attester", "type": "address", "internalType": "address" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "attestationId", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "bytes", "internalType": "bytes" }
      ],
      "outputs": [],
      "stateMutability": "payable"
    },
    {
      "type": "function",
      "name": "didReceiveAttestation",
      "inputs": [
        { "name": "", "type": "address", "internalType": "address" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "address", "internalType": "contract IERC20" },
        { "name": "", "type": "uint256", "internalType": "uint256" },
        { "name": "", "type": "bytes", "internalType": "bytes" }
      ],
      "outputs": [],
      "stateMutability": "pure"
    },
    {
      "type": "function",
      "name": "didReceiveRevocation",
      "inputs": [
        { "name": "", "type": "address", "internalType": "address" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "bytes", "internalType": "bytes" }
      ],
      "outputs": [],
      "stateMutability": "payable"
    },
    {
      "type": "function",
      "name": "didReceiveRevocation",
      "inputs": [
        { "name": "", "type": "address", "internalType": "address" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "uint64", "internalType": "uint64" },
        { "name": "", "type": "address", "internalType": "contract IERC20" },
        { "name": "", "type": "uint256", "internalType": "uint256" },
        { "name": "", "type": "bytes", "internalType": "bytes" }
      ],
      "outputs": [],
      "stateMutability": "pure"
    },
    {
      "type": "function",
      "name": "merchantPayments",
      "inputs": [{ "name": "", "type": "address", "internalType": "address" }],
      "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "merchantRegistry",
      "inputs": [],
      "outputs": [{ "name": "", "type": "address", "internalType": "contract MerchantRegistry" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "paymentSchemaId",
      "inputs": [],
      "outputs": [{ "name": "", "type": "uint64", "internalType": "uint64" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "registeredMerchants",
      "inputs": [{ "name": "", "type": "address", "internalType": "address" }],
      "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "setMerchantRegistry",
      "inputs": [{ "name": "_merchantRegistry", "type": "address", "internalType": "address" }],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "spInstance",
      "inputs": [],
      "outputs": [{ "name": "", "type": "address", "internalType": "contract ISP" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "verifyAndPayMerchant",
      "inputs": [
        { "name": "merchant", "type": "address", "internalType": "address" },
        { "name": "amount", "type": "uint256", "internalType": "uint256" },
        { "name": "purchaseTags", "type": "string[]", "internalType": "string[]" },
        { "name": "serviceName", "type": "string", "internalType": "string" }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "event",
      "name": "LoyaltyPointsMinted",
      "inputs": [
        { "name": "user", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "points", "type": "uint256", "indexed": false, "internalType": "uint256" },
        { "name": "attestationId", "type": "uint64", "indexed": false, "internalType": "uint64" }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "MerchantRegistered",
      "inputs": [{ "name": "merchant", "type": "address", "indexed": false, "internalType": "address" }],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "MerchantTagAdded",
      "inputs": [
        { "name": "merchant", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "tagName", "type": "string", "indexed": false, "internalType": "string" }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "PaymentProcessed",
      "inputs": [
        { "name": "merchant", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "user", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "amount", "type": "uint256", "indexed": false, "internalType": "uint256" },
        { "name": "tokenAddress", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "attestationId", "type": "uint64", "indexed": false, "internalType": "uint64" }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "PurchaseTagged",
      "inputs": [
        { "name": "user", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "merchant", "type": "address", "indexed": false, "internalType": "address" },
        { "name": "tags", "type": "string[]", "indexed": false, "internalType": "string[]" },
        { "name": "amount", "type": "uint256", "indexed": false, "internalType": "uint256" }
      ],
      "anonymous": false
    },
    { "type": "error", "name": "InsufficientAllowance", "inputs": [] },
    { "type": "error", "name": "InvalidPayment", "inputs": [] },
    { "type": "error", "name": "InvalidService", "inputs": [] },
    { "type": "error", "name": "InvalidTag", "inputs": [] },
    {
      "type": "error",
      "name": "SafeERC20FailedOperation",
      "inputs": [{ "name": "token", "type": "address", "internalType": "address" }]
    },
    { "type": "error", "name": "UnauthorizedMerchant", "inputs": [] }
  ]
}
